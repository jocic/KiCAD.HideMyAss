EESchema Schematic File Version 4
LIBS:hardware-cache
EELAYER 26 0
EELAYER END
$Descr A3 16535 11693
encoding utf-8
Sheet 1 1
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L Missing:USBLC6-2 U1
U 1 1 5F42C6D3
P 3700 2650
F 0 "U1" H 3700 3017 50  0000 C CNN
F 1 "USBLC6-2" H 3700 2926 50  0000 C CNN
F 2 "Package_TO_SOT_SMD:SOT-23-6_Handsoldering" H 2800 2050 50  0001 L BNN
F 3 "https://www.st.com/resource/en/datasheet/usblc6-2.pdf" H 3700 3150 50  0001 C CNN
	1    3700 2650
	1    0    0    -1  
$EndComp
$Comp
L Connector:USB_B_Micro J1
U 1 1 5F42C876
P 2700 2400
F 0 "J1" H 2704 2880 50  0000 C CNN
F 1 "USB_B_Micro" H 2700 2782 50  0000 C CNN
F 2 "" H 2850 2350 50  0001 C CNN
F 3 "~" H 2850 2350 50  0001 C CNN
	1    2700 2400
	1    0    0    -1  
$EndComp
NoConn ~ 2600 2800
$Comp
L MCU_Microchip_PIC18:PIC18F45K50_QFP U2
U 1 1 5F42CA4A
P 9900 6950
F 0 "U2" H 9900 8528 50  0000 C CNN
F 1 "PIC18F45K50_QFP" H 9900 8437 50  0000 C CNN
F 2 "Package_QFP:TQFP-44_10x10mm_P0.8mm" H 9900 6950 50  0001 C CIN
F 3 "http://ww1.microchip.com/downloads/en/DeviceDoc/30000684B.pdf" H 9900 6650 50  0001 C CNN
	1    9900 6950
	1    0    0    -1  
$EndComp
NoConn ~ 3000 2600
Wire Wire Line
	3200 2650 3300 2650
Wire Wire Line
	4100 2650 4200 2650
Wire Wire Line
	4100 2550 4300 2550
Wire Wire Line
	4100 2750 4300 2750
$Comp
L power:GND #PWR02
U 1 1 5F42FA59
P 2700 3150
F 0 "#PWR02" H 2700 2900 50  0001 C CNN
F 1 "GND" H 2705 2977 50  0000 C CNN
F 2 "" H 2700 3150 50  0001 C CNN
F 3 "" H 2700 3150 50  0001 C CNN
	1    2700 3150
	1    0    0    -1  
$EndComp
$Comp
L Device:C C1
U 1 1 5F4300CF
P 3700 3050
F 0 "C1" V 3527 3051 50  0000 C CNN
F 1 "100nF" V 3437 3051 50  0000 C CNN
F 2 "" H 3738 2900 50  0001 C CNN
F 3 "~" H 3700 3050 50  0001 C CNN
	1    3700 3050
	0    -1   -1   0   
$EndComp
Wire Wire Line
	4200 3050 3850 3050
Wire Wire Line
	3550 3050 3200 3050
Text GLabel 4300 2550 2    50   Input ~ 0
USB_D+
Text GLabel 4300 2750 2    50   Input ~ 0
USB_D-
Wire Wire Line
	4200 2650 4300 2650
Connection ~ 4200 2650
Text GLabel 4300 2650 2    50   Input ~ 0
USB_VBUS
Wire Wire Line
	4200 2200 4200 2650
Wire Wire Line
	4200 2650 4200 3050
Wire Wire Line
	3200 2650 3200 3050
Connection ~ 3200 3050
Wire Wire Line
	2700 3150 2700 3050
Wire Wire Line
	3000 2200 4200 2200
Wire Wire Line
	3200 3050 2700 3050
Wire Wire Line
	2700 2800 2700 3050
Wire Wire Line
	3300 2750 3100 2750
Wire Wire Line
	3100 2750 3100 2500
Wire Wire Line
	3100 2500 3000 2500
Wire Wire Line
	3000 2400 3200 2400
Wire Wire Line
	3200 2400 3200 2550
Wire Wire Line
	3200 2550 3300 2550
Wire Notes Line
	2400 1800 2400 3450
Text Notes 2400 1750 0    50   ~ 0
USB Connection & ESD Protection
Wire Notes Line
	2400 3450 4800 3450
Wire Notes Line
	4800 1800 4800 3450
Wire Notes Line
	2400 1800 4800 1800
Text GLabel 8100 7950 0    50   Input ~ 0
USB_D+
Text GLabel 8100 7850 0    50   Input ~ 0
USB_D-
Wire Wire Line
	8100 7950 8200 7950
Wire Wire Line
	8200 7850 8100 7850
Text GLabel 8100 7750 0    50   Input ~ 0
USB_VBUS
Wire Wire Line
	8200 7750 8100 7750
$Comp
L Regulator_Linear:LM317_3PinPackage U3
U 1 1 5F43B134
P 3250 5000
F 0 "U3" H 3250 5242 50  0000 C CNN
F 1 "LM317A" H 3250 5151 50  0000 C CNN
F 2 "Package_TO_SOT_SMD:TO-252-2" H 3250 5250 50  0001 C CIN
F 3 "http://www.ti.com/lit/ds/symlink/lm317.pdf" H 3250 5000 50  0001 C CNN
	1    3250 5000
	1    0    0    -1  
$EndComp
$Comp
L Device:C C2
U 1 1 5F43DEFA
P 2450 5250
F 0 "C2" H 2565 5296 50  0000 L CNN
F 1 "0.1μF" H 2565 5205 50  0000 L CNN
F 2 "" H 2488 5100 50  0001 C CNN
F 3 "~" H 2450 5250 50  0001 C CNN
	1    2450 5250
	1    0    0    -1  
$EndComp
$Comp
L Device:C C4
U 1 1 5F43DF4C
P 4350 5750
F 0 "C4" H 4465 5796 50  0000 L CNN
F 1 "1μF" H 4465 5705 50  0000 L CNN
F 2 "" H 4388 5600 50  0001 C CNN
F 3 "~" H 4350 5750 50  0001 C CNN
	1    4350 5750
	1    0    0    -1  
$EndComp
$Comp
L Device:R R1
U 1 1 5F4417D2
P 3650 5250
F 0 "R1" H 3720 5296 50  0000 L CNN
F 1 "1k" H 3720 5205 50  0000 L CNN
F 2 "" V 3580 5250 50  0001 C CNN
F 3 "~" H 3650 5250 50  0001 C CNN
	1    3650 5250
	1    0    0    -1  
$EndComp
$Comp
L Device:R R2
U 1 1 5F444855
P 3250 5750
F 0 "R2" H 3320 5796 50  0000 L CNN
F 1 "1.5k" H 3320 5705 50  0000 L CNN
F 2 "" V 3180 5750 50  0001 C CNN
F 3 "~" H 3250 5750 50  0001 C CNN
	1    3250 5750
	1    0    0    -1  
$EndComp
Wire Wire Line
	3250 5900 3250 6000
Connection ~ 3250 6000
Wire Wire Line
	3650 5000 3650 5100
Wire Wire Line
	3650 5400 3650 5500
Wire Wire Line
	3250 5300 3250 5500
Wire Wire Line
	3550 5000 3650 5000
Wire Wire Line
	3250 5500 3650 5500
Connection ~ 3250 5500
Wire Wire Line
	3250 5500 3250 5600
Connection ~ 2700 3050
Wire Wire Line
	3250 6000 3250 6150
$Comp
L power:GND #PWR03
U 1 1 5F45E674
P 3250 6150
F 0 "#PWR03" H 3250 5900 50  0001 C CNN
F 1 "GND" H 3255 5977 50  0000 C CNN
F 2 "" H 3250 6150 50  0001 C CNN
F 3 "" H 3250 6150 50  0001 C CNN
	1    3250 6150
	1    0    0    -1  
$EndComp
Text GLabel 4450 5000 2    50   Input ~ 0
Vdd
Wire Wire Line
	4000 5400 4000 5500
Wire Wire Line
	4000 5000 4000 5100
$Comp
L Device:D D1
U 1 1 5F44854E
P 4000 5250
F 0 "D1" V 3954 5329 50  0000 L CNN
F 1 "M7" V 4045 5329 50  0000 L CNN
F 2 "" H 4000 5250 50  0001 C CNN
F 3 "~" H 4000 5250 50  0001 C CNN
	1    4000 5250
	0    1    1    0   
$EndComp
$Comp
L Device:CP C3
U 1 1 5F466DD0
P 2800 5750
F 0 "C3" H 2918 5796 50  0000 L CNN
F 1 "10μF" H 2918 5705 50  0000 L CNN
F 2 "" H 2838 5600 50  0001 C CNN
F 3 "~" H 2800 5750 50  0001 C CNN
	1    2800 5750
	1    0    0    -1  
$EndComp
Wire Wire Line
	2800 5600 2800 5500
Wire Wire Line
	2800 6000 2800 5900
Wire Wire Line
	2800 5500 3250 5500
Wire Wire Line
	2800 6000 3250 6000
Wire Notes Line
	4750 6450 4750 4650
Text Notes 1800 4600 0    50   ~ 0
3.3V Voltage Regulator \w Improved Ripple Rejection
Wire Notes Line
	1800 4650 1800 6450
Wire Wire Line
	4350 5000 4450 5000
Wire Wire Line
	3650 5000 4000 5000
Connection ~ 3650 5000
Wire Wire Line
	4350 5000 4000 5000
Connection ~ 4350 5000
Connection ~ 4000 5000
Wire Wire Line
	3650 5500 4000 5500
Connection ~ 3650 5500
Wire Wire Line
	3250 6000 4350 6000
Wire Wire Line
	2800 6000 2450 6000
Connection ~ 2800 6000
Wire Wire Line
	2450 6000 2450 5400
Wire Wire Line
	2450 5000 2950 5000
Wire Wire Line
	2450 5000 2350 5000
Connection ~ 2450 5000
Wire Wire Line
	2450 5100 2450 5000
Wire Wire Line
	4350 5000 4350 5600
Wire Wire Line
	4350 5900 4350 6000
Wire Notes Line
	4750 6450 1800 6450
Wire Notes Line
	1800 4650 4750 4650
$Comp
L power:GND #PWR01
U 1 1 5F486A21
P 1350 1550
F 0 "#PWR01" H 1350 1300 50  0001 C CNN
F 1 "GND" H 1355 1377 50  0000 C CNN
F 2 "" H 1350 1550 50  0001 C CNN
F 3 "" H 1350 1550 50  0001 C CNN
	1    1350 1550
	1    0    0    -1  
$EndComp
Wire Wire Line
	1350 1550 1350 1400
Text GLabel 1350 1400 1    50   Input ~ 0
Vss
$Comp
L Missing:DW01 U4
U 1 1 5F49761B
P 12650 2300
F 0 "U4" H 13150 2567 50  0000 C CNN
F 1 "DW01+G" H 13150 2476 50  0000 C CNN
F 2 "Package_TO_SOT_SMD:TSOT-23-6_HandSoldering" H 12350 1650 50  0001 L BNN
F 3 "https://datasheet.lcsc.com/szlcsc/Fortune-Semicon-DW01-G_C14213.pdf" H 11850 1550 50  0001 L BNN
	1    12650 2300
	1    0    0    -1  
$EndComp
$Comp
L Device:Battery_Cell BT1
U 1 1 5F4978A6
P 12300 3250
F 0 "BT1" H 12182 3346 50  0000 R CNN
F 1 "3.7V" H 12182 3255 50  0000 R CNN
F 2 "" V 12300 3310 50  0001 C CNN
F 3 "~" V 12300 3310 50  0001 C CNN
	1    12300 3250
	-1   0    0    -1  
$EndComp
Wire Wire Line
	12800 3350 12800 3450
$Comp
L Device:R R3
U 1 1 5F49CDDA
P 12550 2950
F 0 "R3" V 12343 2950 50  0000 C CNN
F 1 "100" V 12434 2950 50  0000 C CNN
F 2 "" V 12480 2950 50  0001 C CNN
F 3 "~" H 12550 2950 50  0001 C CNN
	1    12550 2950
	0    1    1    0   
$EndComp
Wire Wire Line
	12400 2950 12300 2950
Wire Wire Line
	12300 2950 12300 3050
Wire Wire Line
	12300 3450 12800 3450
$Comp
L Device:C C5
U 1 1 5F49F544
P 12800 3200
F 0 "C5" H 12915 3246 50  0000 L CNN
F 1 "0.1μF" H 12915 3155 50  0000 L CNN
F 2 "" H 12838 3050 50  0001 C CNN
F 3 "~" H 12800 3200 50  0001 C CNN
	1    12800 3200
	1    0    0    -1  
$EndComp
Wire Wire Line
	12300 3350 12300 3450
Wire Wire Line
	13650 2300 13750 2300
Wire Wire Line
	13650 2400 13750 2400
Wire Wire Line
	12300 2950 12200 2950
Connection ~ 12300 2950
Wire Wire Line
	12300 3450 12200 3450
Connection ~ 12300 3450
Text GLabel 12900 3650 2    50   Input ~ 0
BP_VSS
Text GLabel 12900 2950 2    50   Input ~ 0
BP_VDD
Text GLabel 13750 2300 2    50   Input ~ 0
BP_VSS
Text GLabel 13750 2400 2    50   Input ~ 0
BP_VDD
NoConn ~ 13650 2500
$Comp
L Missing:TP4056 U5
U 1 1 5F4F6DD3
P 8500 2450
F 0 "U5" H 8500 3017 50  0000 C CNN
F 1 "TP4056" H 8500 2926 50  0000 C CNN
F 2 "Package_SO:SSOP-8_2.95x2.8mm_P0.65mm" H 7850 1350 50  0001 L BNN
F 3 "https://datasheet.lcsc.com/szlcsc/1906261508_Nanjing-Extension-Microelectronics-TP4056-42-ESOP8_C16581.pdf" H 8550 1250 50  0001 C CNN
	1    8500 2450
	1    0    0    -1  
$EndComp
$Comp
L Missing:FS8205 Q1
U 1 1 5F508BA9
P 13750 3450
F 0 "Q1" H 14024 3225 50  0000 L CNN
F 1 "FS8205" H 13943 3123 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:TSOT-23-6_HandSoldering" H 12850 2850 50  0001 L BNN
F 3 "https://datasheet.lcsc.com/szlcsc/Fortune-Semicon-FS8205_C32254.pdf" H 12450 2750 50  0001 L BNN
	1    13750 3450
	1    0    0    -1  
$EndComp
Wire Wire Line
	12650 2500 12550 2500
Wire Wire Line
	13950 3100 13950 3200
Wire Wire Line
	12650 2400 12550 2400
Wire Wire Line
	12650 2300 12550 2300
Wire Wire Line
	13550 3200 13550 3100
Text GLabel 12550 2300 0    50   Input ~ 0
BP_OD
Text GLabel 12550 2500 0    50   Input ~ 0
BP_OC
Text GLabel 12550 2400 0    50   Input ~ 0
BP_CS
Text GLabel 13550 3100 1    50   Input ~ 0
BP_OD
Text GLabel 13950 3100 1    50   Input ~ 0
BP_OC
Wire Wire Line
	14200 3450 14300 3450
Text GLabel 14300 2950 1    50   Input ~ 0
BP_CS
Wire Wire Line
	14300 3050 14300 2950
$Comp
L Device:R R8
U 1 1 5F54F52E
P 14300 3200
F 0 "R8" H 14370 3246 50  0000 L CNN
F 1 "1k" H 14370 3155 50  0000 L CNN
F 2 "" V 14230 3200 50  0001 C CNN
F 3 "~" H 14300 3200 50  0001 C CNN
	1    14300 3200
	1    0    0    -1  
$EndComp
Wire Wire Line
	14300 3450 14300 3350
NoConn ~ 13750 3200
NoConn ~ 13750 3650
Connection ~ 12800 3450
Wire Notes Line
	11800 3900 11800 1900
Wire Notes Line
	14550 1900 14550 3900
Text Notes 11800 1850 0    50   ~ 0
Battery Protection
Text GLabel 7400 1550 0    50   Input ~ 0
USB_VBUS
Wire Wire Line
	7800 1550 7900 1550
$Comp
L Device:R R5
U 1 1 5F584EE8
P 7650 1550
F 0 "R5" V 7443 1550 50  0000 C CNN
F 1 "180" V 7534 1550 50  0000 C CNN
F 2 "" V 7580 1550 50  0001 C CNN
F 3 "~" H 7650 1550 50  0001 C CNN
	1    7650 1550
	0    1    1    0   
$EndComp
$Comp
L Device:D_Zener D4
U 1 1 5F587D40
P 9600 2200
F 0 "D4" V 9554 2279 50  0000 L CNN
F 1 "ZMM5V1" V 9645 2279 50  0000 L CNN
F 2 "Diode_SMD:D_MiniMELF_Handsoldering" H 9600 2200 50  0001 C CNN
F 3 "~" H 9600 2200 50  0001 C CNN
	1    9600 2200
	0    1    1    0   
$EndComp
$Comp
L Device:LED D2
U 1 1 5F59CA98
P 7300 2150
F 0 "D2" H 7291 2366 50  0000 C CNN
F 1 "GHC-YR" H 7291 2275 50  0000 C CNN
F 2 "" H 7300 2150 50  0001 C CNN
F 3 "~" H 7300 2150 50  0001 C CNN
	1    7300 2150
	1    0    0    -1  
$EndComp
$Comp
L Device:LED D3
U 1 1 5F59CE16
P 7700 2250
F 0 "D3" H 7700 2510 50  0000 C CNN
F 1 "BHC-ZL" H 7700 2418 50  0000 C CNN
F 2 "" H 7700 2250 50  0001 C CNN
F 3 "~" H 7700 2250 50  0001 C CNN
	1    7700 2250
	1    0    0    -1  
$EndComp
$Comp
L Device:R R6
U 1 1 5F5C7FC3
P 7700 2650
F 0 "R6" V 7493 2650 50  0000 C CNN
F 1 "68" V 7584 2650 50  0000 C CNN
F 2 "" V 7630 2650 50  0001 C CNN
F 3 "~" H 7700 2650 50  0001 C CNN
	1    7700 2650
	0    1    1    0   
$EndComp
Wire Wire Line
	7550 2250 7450 2250
Wire Wire Line
	7450 2250 7450 2650
Wire Wire Line
	7450 2650 7550 2650
Wire Wire Line
	7900 2250 7850 2250
$Comp
L power:GND #PWR0101
U 1 1 5F5E2B2B
P 8500 3350
F 0 "#PWR0101" H 8500 3100 50  0001 C CNN
F 1 "GND" H 8505 3177 50  0000 C CNN
F 2 "" H 8500 3350 50  0001 C CNN
F 3 "" H 8500 3350 50  0001 C CNN
	1    8500 3350
	1    0    0    -1  
$EndComp
Wire Wire Line
	9200 3250 8500 3250
Connection ~ 8500 3250
Wire Wire Line
	8500 3350 8500 3250
$Comp
L Device:R R4
U 1 1 5F5EC4EE
P 7300 2750
F 0 "R4" V 7093 2750 50  0000 C CNN
F 1 "68" V 7184 2750 50  0000 C CNN
F 2 "" V 7230 2750 50  0001 C CNN
F 3 "~" H 7300 2750 50  0001 C CNN
	1    7300 2750
	0    1    1    0   
$EndComp
Wire Wire Line
	7150 2750 7050 2750
Wire Wire Line
	7900 2150 7450 2150
Connection ~ 7900 2150
Wire Wire Line
	7900 2150 7900 2250
Connection ~ 7900 2250
Wire Wire Line
	7900 2650 7850 2650
Wire Wire Line
	7450 2750 7900 2750
Wire Wire Line
	7150 2150 7050 2150
Wire Wire Line
	7050 2150 7050 2750
$Comp
L Device:C C6
U 1 1 5F6246D5
P 6650 2200
F 0 "C6" H 6765 2246 50  0000 L CNN
F 1 "10μF" H 6765 2155 50  0000 L CNN
F 2 "" H 6688 2050 50  0001 C CNN
F 3 "~" H 6650 2200 50  0001 C CNN
	1    6650 2200
	1    0    0    -1  
$EndComp
Wire Wire Line
	9100 2750 9200 2750
$Comp
L Device:R R7
U 1 1 5F6347C4
P 9200 3000
F 0 "R7" H 9270 3046 50  0000 L CNN
F 1 "2k" H 9270 2955 50  0000 L CNN
F 2 "" V 9130 3000 50  0001 C CNN
F 3 "~" H 9200 3000 50  0001 C CNN
	1    9200 3000
	1    0    0    -1  
$EndComp
Wire Wire Line
	9200 2750 9200 2850
Wire Wire Line
	9200 3150 9200 3250
Wire Wire Line
	8500 3050 8500 3250
Wire Wire Line
	9600 2650 9600 3250
Connection ~ 9200 3250
Wire Wire Line
	9100 2650 9200 2650
Connection ~ 9600 2650
Wire Wire Line
	9600 2350 9600 2650
Wire Wire Line
	9600 1750 9600 2050
Wire Wire Line
	7400 1550 7500 1550
Wire Wire Line
	6650 1750 7900 1750
Wire Wire Line
	7900 1750 7900 2150
Connection ~ 7900 1750
Wire Wire Line
	8500 3250 6650 3250
Wire Wire Line
	6650 1750 6650 2050
Wire Wire Line
	6650 2350 6650 3250
Wire Wire Line
	7900 1550 7900 1750
Wire Wire Line
	9100 2150 9200 2150
Wire Wire Line
	9200 2150 9200 2250
$Comp
L Device:C C7
U 1 1 5F698C22
P 9200 2400
F 0 "C7" H 9315 2446 50  0000 L CNN
F 1 "10μF" H 9315 2355 50  0000 L CNN
F 2 "" H 9238 2250 50  0001 C CNN
F 3 "~" H 9200 2400 50  0001 C CNN
	1    9200 2400
	1    0    0    -1  
$EndComp
Wire Wire Line
	9200 2550 9200 2650
Wire Wire Line
	9200 2650 9600 2650
Connection ~ 9200 2650
Wire Wire Line
	9200 3250 9600 3250
Wire Wire Line
	7900 1750 9600 1750
Text GLabel 12200 2950 0    50   Input ~ 0
BAT+
Wire Wire Line
	12700 2950 12800 2950
Wire Wire Line
	12800 3050 12800 2950
Connection ~ 12800 2950
Wire Wire Line
	12800 2950 12900 2950
Text GLabel 12200 3450 0    50   Input ~ 0
BAT-
Text GLabel 9700 1900 2    50   Input ~ 0
BAT+
Wire Notes Line
	10100 3650 10100 1200
Wire Notes Line
	10100 1200 6400 1200
Wire Notes Line
	6400 1200 6400 3650
Wire Notes Line
	6400 3650 10100 3650
Text Notes 6400 1150 0    50   ~ 0
580mA Battery Management
Text GLabel 2350 5000 0    50   Input ~ 0
BP_VDD
Wire Wire Line
	12800 3450 13300 3450
Wire Wire Line
	12800 3450 12800 3650
Wire Wire Line
	12900 3650 12800 3650
Wire Wire Line
	9600 2650 9700 2650
Text GLabel 9700 2650 2    50   Input ~ 0
BAT-
Wire Wire Line
	9200 2150 9200 1900
Wire Wire Line
	9200 1900 9700 1900
Connection ~ 9200 2150
Wire Notes Line
	11850 1900 14550 1900
Wire Notes Line
	11800 3900 14550 3900
$EndSCHEMATC
